@startuml
actor NhanVienKho
participant ConsoleUI
participant NhapHangView
participant NhapHangDAO
database MySQL

NhanVienKho -> ConsoleUI : Chọn "Tạo phiếu nhập"
ConsoleUI -> NhapHangView : taoPhieuNhap()
NhapHangView -> NhapHangDAO : taoPhieuNhap(NhapHangDTO)
NhapHangDAO -> MySQL : CHECK Nhân viên, NCC tồn tại
NhapHangDAO -> MySQL : INSERT phieunhap(... 'chuaxacnhan')
NhapHangDAO -> MySQL : SELECT LAST_INSERT_ID()
... thêm chi tiết ...
NhapHangDAO -> MySQL : INSERT chitietnhap_nl
NhapHangDAO -> MySQL : UPDATE ncc_nguyenlieu
NhapHangDAO -> MySQL : UPSERT kho_nguyenlieu
NhapHangDAO -> MySQL : UPDATE phieunhap.ThanhTien
ConsoleUI -> NhapHangView : Xác nhận phiếu
NhapHangView -> NhapHangDAO : xacNhanPhieuNhap(maPN)
NhapHangDAO -> MySQL : UPDATE phieunhap SET TrangThai='daxacnhan'
@enduml

