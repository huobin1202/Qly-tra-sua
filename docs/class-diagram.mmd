classDiagram
    %% Main Application Classes
    class Runner {
        +main(String[] args)$
    }
    
    class MainDashboard {
        -JPanel mainPanel
        -CardLayout cardLayout
        -JPanel leftSidebar
        -JPanel topBar
        -JPanel rightSidebar
        -JLabel userInfoLabel
        -JLabel roleLabel
        -String currentUserRole
        +MainDashboard()
        -initializeComponents()
        -setupLayout()
        -setupEventHandlers()
        -createLeftSidebar()
        -createChildViews()
    }
    
    class LoginDialog {
        -JTextField usernameField
        -JPasswordField passwordField
        -boolean loginSuccessful
        +LoginDialog(JFrame parent)
        +isLoginSuccessful() boolean
        -validateLogin() boolean
    }
    
    class Session {
        +int currentMaNV$
        +String currentTaiKhoan$
        +String currentChucVu$
    }
    
    %% View Classes
    class MainFrameInterface {
        <<interface>>
        +showView(String viewName)
        +refreshData()
    }
    
    class DonHangView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +DonHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
        -setupEventHandlers()
    }
    
    class ThemDonHangView {
        -JComboBox monCombo
        -JComboBox toppingCombo
        -JSpinner soLuongSpinner
        -JTextField ghiChuField
        -JLabel tongTienLabel
        -MainFrameInterface parent
        +ThemDonHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -calculateTotal()
    }
    
    class SuaDonHangView {
        -JComboBox monCombo
        -JComboBox toppingCombo
        -JSpinner soLuongSpinner
        -JTextField ghiChuField
        -JLabel tongTienLabel
        -MainFrameInterface parent
        -DonHangDTO donHang
        +SuaDonHangView(MainFrameInterface parent, DonHangDTO donHang)
        -initializeComponents()
        -setupLayout()
        -loadDonHangData()
    }
    
    class HangHoaView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -JComboBox categoryCombo
        -MainFrameInterface parent
        -String currentView
        +HangHoaView(MainFrameInterface parent)
        +setCurrentView(String view)
        +getCurrentView() String
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class ThemMonView {
        -JTextField tenMonField
        -JTextField giaField
        -JComboBox loaiMonCombo
        -JTextArea moTaArea
        -MainFrameInterface parent
        +ThemMonView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -saveMon()
    }
    
    class KhachHangView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +KhachHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class NhanVienView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +NhanVienView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class NhaCungCapView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +NhaCungCapView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class NhapHangView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +NhapHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class ThemNhapHangView {
        -JComboBox nhaCungCapCombo
        -JComboBox nguyenLieuCombo
        -JSpinner soLuongSpinner
        -JTextField donGiaField
        -JTextField donViField
        -JTextArea ghiChuArea
        -MainFrameInterface parent
        +ThemNhapHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -savePhieuNhap()
    }
    
    class GiaoHangView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +GiaoHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class KhoHangView {
        -JTable table
        -DefaultTableModel tableModel
        -JTextField searchField
        -JComboBox searchCombo
        -MainFrameInterface parent
        +KhoHangView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -loadData()
    }
    
    class ThongKeView {
        -JTabbedPane tabbedPane
        -ThongKeDAO thongKeDAO
        -JComboBox yearCombo
        -JTextField fromDateField
        -JTextField toDateField
        +ThongKeView()
        -initializeComponents()
        -setupLayout()
        -loadInitialData()
        -createTongQuanTab()
        -createMonBanChayTab()
        -createDoanhThuTab()
        -createNhanVienTab()
        -createKhachHangTab()
        -createBaoCaoTab()
    }
    
    class BaoCaoView {
        -JTable table
        -DefaultTableModel tableModel
        -JComboBox reportTypeCombo
        -JTextField fromDateField
        -JTextField toDateField
        -MainFrameInterface parent
        +BaoCaoView(MainFrameInterface parent)
        -initializeComponents()
        -setupLayout()
        -generateReport()
    }
    
    %% DAO Classes
    class DonHangDAO {
        +them(DonHangDTO donHang) boolean
        +sua(DonHangDTO donHang) boolean
        +xoa(int maDon) boolean
        +xuat() List~DonHangDTO~
        +xemChiTiet(int maDon) DonHangDTO
        +timkiem(String keyword) List~DonHangDTO~
        +xacNhanThanhToan(int maDon) boolean
        +chuanHoaTrangThaiDonHang() void
    }
    
    class ChiTietDonHangDAO {
        +them(ChiTietDonHangDTO chiTiet) boolean
        +sua(ChiTietDonHangDTO chiTiet) boolean
        +xoa(int maDon, int maMon) boolean
        +xuat(int maDon) List~ChiTietDonHangDTO~
        +timkiem(int maDon, String keyword) List~ChiTietDonHangDTO~
    }
    
    class KhachHangDAO {
        +them(KhachHangDTO khachHang) boolean
        +sua(KhachHangDTO khachHang) boolean
        +xoa(int maKH) boolean
        +xuat() List~KhachHangDTO~
        +timkiem(String keyword) List~KhachHangDTO~
    }
    
    class NhanVienDAO {
        +them(NhanVienDTO nhanVien) boolean
        +sua(NhanVienDTO nhanVien) boolean
        +xoa(int maNV) boolean
        +xuat() List~NhanVienDTO~
        +timkiem(String keyword) List~NhanVienDTO~
        +chuanHoaChucVuNhanVien() void
    }
    
    class MonDAO {
        +them(MonDTO mon) boolean
        +sua(MonDTO mon) boolean
        +xoa(int maMon) boolean
        +xuat() List~MonDTO~
        +timkiem(String keyword) List~MonDTO~
        +chuanHoaTrangThaiMon() void
    }
    
    class LoaiMonDAO {
        +them(LoaiMonDTO loaiMon) boolean
        +sua(LoaiMonDTO loaiMon) boolean
        +xoa(int maLoai) boolean
        +xuat() List~LoaiMonDTO~
    }
    
    class NhaCungCapDAO {
        +them(NhaCungCapDTO nhaCungCap) boolean
        +sua(NhaCungCapDTO nhaCungCap) boolean
        +xoa(int maNCC) boolean
        +xuat() List~NhaCungCapDTO~
        +timkiem(String keyword) List~NhaCungCapDTO~
    }
    
    class NguyenLieuDAO {
        +them(NguyenLieuDTO nguyenLieu) boolean
        +sua(NguyenLieuDTO nguyenLieu) boolean
        +xoa(int maNL) boolean
        +xuat() List~NguyenLieuDTO~
    }
    
    class NhapHangDAO {
        +taoPhieuNhap(NhapHangDTO phieuNhap) boolean
        +capNhatPhieuNhap(NhapHangDTO phieuNhap) boolean
        +xacNhanPhieuNhap(int maPN) boolean
        +xoaPhieuNhap(int maPN) boolean
        +xuat() List~NhapHangDTO~
        +timkiem(String keyword) List~NhapHangDTO~
    }
    
    class KhoHangDAO {
        +xemTonNguyenLieu() List~KhoHangDTO~
        +xemDanhSachNCC(int maNL) List~NhaCungCapSanPhamDTO~
        +xemNguyenLieuNCC(int maNCC) List~SanPhamChonNhapDTO~
        +capNhatTonKho(int maNL, int soLuong) boolean
    }
    
    class ThongKeDAO {
        +getTongQuan() ThongKeDTO
        +getMonBanChay(String fromDate, String toDate) List~ThongKeDTO~
        +getDoanhThu(String fromDate, String toDate) List~ThongKeDTO~
        +getNhanVien(String fromDate, String toDate) List~ThongKeDTO~
        +getKhachHang(String fromDate, String toDate) List~ThongKeDTO~
    }
    
    class GiaoHangDAO {
        +them(GiaoHangDTO giaoHang) boolean
        +sua(GiaoHangDTO giaoHang) boolean
        +xoa(int maGiao) boolean
        +xuat() List~GiaoHangDTO~
        +timkiem(String keyword) List~GiaoHangDTO~
    }
    
    %% DTO Classes
    class DonHangDTO {
        -int maDon
        -int maNV
        -String loai
        -String trangThai
        -String ngayDat
        -long tongTien
        -int giamGia
        +DonHangDTO()
        +getMaDon() int
        +setMaDon(int maDon) void
        +getMaNV() int
        +setMaNV(int maNV) void
        +getLoai() String
        +setLoai(String loai) void
        +getTrangThai() String
        +setTrangThai(String trangThai) void
        +getNgayDat() String
        +setNgayDat(String ngayDat) void
        +getTongTien() long
        +setTongTien(long tongTien) void
        +getGiamGia() int
        +setGiamGia(int giamGia) void
    }
    
    class ChiTietDonHangDTO {
        -int maDon
        -int maMon
        -int maTopping
        -int soLuong
        -long donGia
        -String ghiChu
        +ChiTietDonHangDTO()
        +getMaDon() int
        +setMaDon(int maDon) void
        +getMaMon() int
        +setMaMon(int maMon) void
        +getMaTopping() int
        +setMaTopping(int maTopping) void
        +getSoLuong() int
        +setSoLuong(int soLuong) void
        +getDonGia() long
        +setDonGia(long donGia) void
        +getGhiChu() String
        +setGhiChu(String ghiChu) void
    }
    
    class KhachHangDTO {
        -int maKH
        -String sdt
        -String hoTen
        -String diaChi
        -String ngaySinh
        +KhachHangDTO()
        +getMaKH() int
        +setMaKH(int maKH) void
        +getSdt() String
        +setSdt(String sdt) void
        +getHoTen() String
        +setHoTen(String hoTen) void
        +getDiaChi() String
        +setDiaChi(String diaChi) void
        +getNgaySinh() String
        +setNgaySinh(String ngaySinh) void
    }
    
    class NhanVienDTO {
        -int maNV
        -String taiKhoan
        -String matKhau
        -String hoTen
        -String sdt
        -String ngayVaoLam
        -String chucVu
        -int luong
        +NhanVienDTO()
        +getMaNV() int
        +setMaNV(int maNV) void
        +getTaiKhoan() String
        +setTaiKhoan(String taiKhoan) void
        +getMatKhau() String
        +setMatKhau(String matKhau) void
        +getHoTen() String
        +setHoTen(String hoTen) void
        +getSdt() String
        +setSdt(String sdt) void
        +getNgayVaoLam() String
        +setNgayVaoLam(String ngayVaoLam) void
        +getChucVu() String
        +setChucVu(String chucVu) void
        +getLuong() int
        +setLuong(int luong) void
    }
    
    class MonDTO {
        -int maMon
        -String tenMon
        -long gia
        -int maLoai
        -String moTa
        +MonDTO()
        +getMaMon() int
        +setMaMon(int maMon) void
        +getTenMon() String
        +setTenMon(String tenMon) void
        +getGia() long
        +setGia(long gia) void
        +getMaLoai() int
        +setMaLoai(int maLoai) void
        +getMoTa() String
        +setMoTa(String moTa) void
    }
    
    class LoaiMonDTO {
        -int maLoai
        -String tenLoai
        +LoaiMonDTO()
        +getMaLoai() int
        +setMaLoai(int maLoai) void
        +getTenLoai() String
        +setTenLoai(String tenLoai) void
    }
    
    class NhaCungCapDTO {
        -int maNCC
        -String tenNCC
        -String diaChi
        -String sdt
        +NhaCungCapDTO()
        +getMaNCC() int
        +setMaNCC(int maNCC) void
        +getTenNCC() String
        +setTenNCC(String tenNCC) void
        +getDiaChi() String
        +setDiaChi(String diaChi) void
        +getSdt() String
        +setSdt(String sdt) void
    }
    
    class NguyenLieuDTO {
        -int maNL
        -String tenNL
        -String donVi
        -long gia
        +NguyenLieuDTO()
        +getMaNL() int
        +setMaNL(int maNL) void
        +getTenNL() String
        +setTenNL(String tenNL) void
        +getDonVi() String
        +setDonVi(String donVi) void
        +getGia() long
        +setGia(long gia) void
    }
    
    class NhapHangDTO {
        -int maPN
        -int maNV
        -int maNCC
        -String ngay
        -String ghiChu
        -long thanhTien
        -String trangThai
        +NhapHangDTO()
        +getMaPN() int
        +setMaPN(int maPN) void
        +getMaNV() int
        +setMaNV(int maNV) void
        +getMaNCC() int
        +setMaNCC(int maNCC) void
        +getNgay() String
        +setNgay(String ngay) void
        +getGhiChu() String
        +setGhiChu(String ghiChu) void
        +getThanhTien() long
        +setThanhTien(long thanhTien) void
        +getTrangThai() String
        +setTrangThai(String trangThai) void
    }
    
    class ChiTietNhapHangDTO {
        -int maPN
        -int maNL
        -int soLuong
        -long donGia
        -String donVi
        +ChiTietNhapHangDTO()
        +getMaPN() int
        +setMaPN(int maPN) void
        +getMaNL() int
        +setMaNL(int maNL) void
        +getSoLuong() int
        +setSoLuong(int soLuong) void
        +getDonGia() long
        +setDonGia(long donGia) void
        +getDonVi() String
        +setDonVi(String donVi) void
    }
    
    class GiaoHangDTO {
        -int maGiao
        -int maDon
        -int maNV
        -String trangThai
        -String thoiGian
        -String diaChi
        +GiaoHangDTO()
        +getMaGiao() int
        +setMaGiao(int maGiao) void
        +getMaDon() int
        +setMaDon(int maDon) void
        +getMaNV() int
        +setMaNV(int maNV) void
        +getTrangThai() String
        +setTrangThai(String trangThai) void
        +getThoiGian() String
        +setThoiGian(String thoiGian) void
        +getDiaChi() String
        +setDiaChi(String diaChi) void
    }
    
    class KhoHangDTO {
        -int maMon
        -String tenMon
        -String tenDonVi
        -int soLuong
        +KhoHangDTO()
        +getMaMon() int
        +setMaMon(int maMon) void
        +getTenMon() String
        +setTenMon(String tenMon) void
        +getTenDonVi() String
        +setTenDonVi(String tenDonVi) void
        +getSoLuong() int
        +setSoLuong(int soLuong) void
    }
    
    class ThongKeDTO {
        -String ten
        -int soLuong
        -long giaTri
        -String donVi
        +ThongKeDTO()
        +getTen() String
        +setTen(String ten) void
        +getSoLuong() int
        +setSoLuong(int soLuong) void
        +getGiaTri() long
        +setGiaTri(long giaTri) void
        +getDonVi() String
        +setDonVi(String donVi) void
    }
    
    class NhaCungCapSanPhamDTO {
        -int maNCC
        -String tenNCC
        -int maNL
        -String tenNL
        -int soLuong
        -String donVi
        +NhaCungCapSanPhamDTO()
        +getMaNCC() int
        +setMaNCC(int maNCC) void
        +getTenNCC() String
        +setTenNCC(String tenNCC) void
        +getMaNL() int
        +setMaNL(int maNL) void
        +getTenNL() String
        +setTenNL(String tenNL) void
        +getSoLuong() int
        +setSoLuong(int soLuong) void
        +getDonVi() String
        +setDonVi(String donVi) void
    }
    
    class SanPhamChonNhapDTO {
        -int maNL
        -String tenNL
        -int soLuong
        -String donVi
        -long donGia
        +SanPhamChonNhapDTO()
        +getMaNL() int
        +setMaNL(int maNL) void
        +getTenNL() String
        +setTenNL(String tenNL) void
        +getSoLuong() int
        +setSoLuong(int soLuong) void
        +getDonVi() String
        +setDonVi(String donVi) void
        +getDonGia() long
        +setDonGia(long donGia) void
    }
    
    %% Database Classes
    class DBUtil {
        +getConnection() Connection$
        +closeConnection(Connection conn)$
    }
    
    %% Relationships
    Runner --> LoginDialog : creates
    Runner --> MainDashboard : creates
    LoginDialog --> Session : updates
    MainDashboard ..|> MainFrameInterface : implements
    
    %% View to DAO relationships
    DonHangView --> DonHangDAO : uses
    ThemDonHangView --> DonHangDAO : uses
    SuaDonHangView --> DonHangDAO : uses
    HangHoaView --> MonDAO : uses
    HangHoaView --> LoaiMonDAO : uses
    ThemMonView --> MonDAO : uses
    KhachHangView --> KhachHangDAO : uses
    NhanVienView --> NhanVienDAO : uses
    NhaCungCapView --> NhaCungCapDAO : uses
    NhapHangView --> NhapHangDAO : uses
    ThemNhapHangView --> NhapHangDAO : uses
    GiaoHangView --> GiaoHangDAO : uses
    KhoHangView --> KhoHangDAO : uses
    ThongKeView --> ThongKeDAO : uses
    BaoCaoView --> ThongKeDAO : uses
    
    %% DAO to DTO relationships
    DonHangDAO --> DonHangDTO : uses
    DonHangDAO --> ChiTietDonHangDTO : uses
    ChiTietDonHangDAO --> ChiTietDonHangDTO : uses
    KhachHangDAO --> KhachHangDTO : uses
    NhanVienDAO --> NhanVienDTO : uses
    MonDAO --> MonDTO : uses
    LoaiMonDAO --> LoaiMonDTO : uses
    NhaCungCapDAO --> NhaCungCapDTO : uses
    NguyenLieuDAO --> NguyenLieuDTO : uses
    NhapHangDAO --> NhapHangDTO : uses
    NhapHangDAO --> ChiTietNhapHangDTO : uses
    GiaoHangDAO --> GiaoHangDTO : uses
    KhoHangDAO --> KhoHangDTO : uses
    KhoHangDAO --> NhaCungCapSanPhamDTO : uses
    KhoHangDAO --> SanPhamChonNhapDTO : uses
    ThongKeDAO --> ThongKeDTO : uses
    
    %% DAO to Database relationships
    DonHangDAO --> DBUtil : uses
    ChiTietDonHangDAO --> DBUtil : uses
    KhachHangDAO --> DBUtil : uses
    NhanVienDAO --> DBUtil : uses
    MonDAO --> DBUtil : uses
    LoaiMonDAO --> DBUtil : uses
    NhaCungCapDAO --> DBUtil : uses
    NguyenLieuDAO --> DBUtil : uses
    NhapHangDAO --> DBUtil : uses
    GiaoHangDAO --> DBUtil : uses
    KhoHangDAO --> DBUtil : uses
    ThongKeDAO --> DBUtil : uses